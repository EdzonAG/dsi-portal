{% extends 'base.html' %}
{% block content %}

<div class="center-viewport">
  {% if status == "invalid" %}
    <div class="status-card status-inactive">
      <div class="status-icon">
        <i class="fa-solid fa-circle-xmark"></i>
      </div>
      <h3>PSP no encontrado</h3>
      <div class="sub">El usuario no existe o fue eliminado.</div>
      <div class="mt-3">
        <span class="status-pill">Inválido</span>
      </div>
      <div class="mt-4">
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Volver al Menú Principal</a>
      </div>
    </div>
  {% else %}
    {# BACKEND:
       - Provee 'name' (string), 'status' ("activo"/"inactivo"), y opcional:
         'psp_id', 'expiration_date' (string ya formateada).
    #}
    <div class="status-card {% if status in ['ACTIVO', True, 'True'] %}status-active{% else %}status-inactive{% endif %}">
      <div class="status-icon">
        {% if status in ['ACTIVO', True, 'True'] %}
          <i class="fa-solid fa-circle-check"></i>
        {% else %}
          <i class="fa-solid fa-circle-xmark"></i>
        {% endif %}
      </div>

      <h3>{{ name }}</h3>
      {% if psp_id %}
        <div class="sub">ID: <strong>{{ psp_id }}</strong></div>
      {% endif %}

      <div class="mt-3">
        {% if status in ['ACTIVO', True, 'True'] %}
          <span class="status-pill">Activo</span>
        {% else %}
          <span class="status-pill">Inactivo</span>
        {% endif %}
      </div>

      {% if expiration_date %}
        <div class="mt-2 sub">Vigencia hasta: {{ expiration_date.strftime('%Y-%m-%d') }}</div>
      {% endif %}

      <div class="mt-4 d-flex gap-2 justify-content-center">
        <a href="{{ url_for('credenciales.credenciales_home') }}" class="btn btn-light">Ir al Panel</a>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Volver al Menú Principal</a>
      </div>
    </div>
  {% endif %}
</div>

{% endblock %}
